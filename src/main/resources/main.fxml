<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<GridPane xmlns:fx="http://javafx.com/fxml" fx:controller="at.favre.tools.dconvert.ui.GUIController"
          stylesheets="flatten.css, style.css" styleClass="body" maxHeight="Infinity"
          maxWidth="Infinity" alignment="CENTER" hgap="8" vgap="8">
    <padding>
        <Insets top="20" right="15" bottom="5" left="15"/>
    </padding>

    <Label text="Source" styleClass="label, label_main" alignment="CENTER_RIGHT" maxWidth="Infinity"/>
    <TextField fx:id="textFieldSrcPath" disable="true" GridPane.columnIndex="1"
               GridPane.rowIndex="0" maxWidth="Infinity" GridPane.hgrow="always"/>
    <Button fx:id="btnSrcFile" text="" GridPane.columnIndex="2" GridPane.rowIndex="0" maxWidth="Infinity"
            GridPane.hgrow="always"/>
    <Button fx:id="btnSrcFolder" text="" GridPane.columnIndex="3" GridPane.rowIndex="0" maxWidth="Infinity"
            GridPane.hgrow="always"/>

    <Label text="Scale Type" styleClass="label, label_main" alignment="CENTER_RIGHT" maxWidth="Infinity"
           GridPane.columnIndex="0"
           GridPane.rowIndex="1"/>

    <GridPane alignment="CENTER_LEFT" GridPane.columnIndex="1" GridPane.rowIndex="1" maxWidth="Infinity"
              GridPane.columnSpan="3" hgap="3" vgap="3" style="-fx-padding: 10 0 5 0">
        <fx:define>
            <ToggleGroup fx:id="scaleTypeToggleGroup"/>
        </fx:define>
        <children>
            <RadioButton fx:id="rbFactor" text="Source Scale Factor" toggleGroup="$scaleTypeToggleGroup"
                         GridPane.columnIndex="0" selected="true" style="-fx-padding: 0 8 0 0">
                <tooltip>
                    <Tooltip
                            text="Base source scale as factor (1,1.5,2,3,4,etc.); used if the images already have the correct resolution for one scale factor and up- and downscaling for all other densities is needed."/>
                </tooltip>
            </RadioButton>
            <RadioButton fx:id="rbDp" text="Width in density independent pixels (dp)"
                         toggleGroup="$scaleTypeToggleGroup" GridPane.columnIndex="1">
                <tooltip>
                    <Tooltip
                            text="Set the width in dp (density independent pixels) which denotes the pixel output in mdpi/x1. In this mode all output images will have the same width."/>
                </tooltip>
            </RadioButton>
        </children>

    </GridPane>

    <Label text="Fixed Width:" styleClass="label, label_main" alignment="CENTER_RIGHT"
           maxWidth="Infinity" visible="false"
           fx:id="labelDp" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
    <TextField fx:id="textFieldDp" GridPane.columnIndex="1" GridPane.rowIndex="2" maxWidth="Infinity"
               alignment="CENTER_RIGHT" visible="false"/>
    <Label fx:id="labelDpPostFix" GridPane.columnIndex="2" text="dp" GridPane.rowIndex="2" alignment="CENTER_RIGHT"
           visible="false"/>

    <GridPane fx:id="gridPaneScaleFactorLabel" alignment="CENTER_RIGHT" GridPane.columnIndex="0" GridPane.rowIndex="2"
              maxWidth="Infinity">
        <Label text="Scale (x3.00)" styleClass="label, label_main" alignment="CENTER_RIGHT"
               maxWidth="Infinity"
               fx:id="labelScale" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
        <Label text="xxhdpi / 3x" styleClass="label, footnote" alignment="CENTER_RIGHT"
               maxWidth="Infinity"
               fx:id="labelScaleSubtitle" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
    </GridPane>
    <Slider fx:id="scaleSlider" min="0.5" max="6" value="3" majorTickUnit="1" blockIncrement="0.25"
            GridPane.columnIndex="1" GridPane.rowIndex="2" showTickLabels="true" snapToTicks="true"
            showTickMarks="true" GridPane.columnSpan="3">
        <tooltip>
            <Tooltip
                    text="Sets the scale factor of the source file(s). Based on this all the other scale types will be calculated."/>
        </tooltip>
    </Slider>

    <Label text="Destination" style="-fx-font-style: italic" styleClass="label, label_main"
           alignment="CENTER_RIGHT"
           maxWidth="Infinity" GridPane.columnIndex="0"
           GridPane.rowIndex="3"/>
    <TextField fx:id="textFieldDstPath" disable="true" maxWidth="Infinity" GridPane.columnIndex="1"
               GridPane.rowIndex="3"/>
    <Button fx:id="btnDstFolder" maxWidth="Infinity" text="" GridPane.columnIndex="2" GridPane.columnSpan="2"
            GridPane.rowIndex="3"/>

    <VBox minHeight="0" GridPane.columnIndex="0" GridPane.rowIndex="4" GridPane.columnSpan="4"/>

    <GridPane fx:id="gridPaneChoiceBoxes" alignment="center" hgap="5" vgap="5" GridPane.columnIndex="0"
              GridPane.rowIndex="5"
              GridPane.columnSpan="4" maxHeight="Infinity" maxWidth="Infinity" GridPane.hgrow="always">

        <Label maxWidth="Infinity" styleClass="label" alignment="CENTER_RIGHT" text="Platform" GridPane.columnIndex="0"
               GridPane.rowIndex="0" GridPane.hgrow="always"/>
        <ChoiceBox fx:id="choicePlatform" maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="0"
                   GridPane.columnSpan="3" GridPane.hgrow="always">
            <tooltip>
                <Tooltip text="Defines which formats will be generated"/>
            </tooltip>
        </ChoiceBox>

        <Label maxWidth="Infinity" GridPane.hgrow="always" styleClass="label" alignment="CENTER_RIGHT"
               text="Compression"
               GridPane.columnIndex="0"
               GridPane.rowIndex="1"/>
        <ChoiceBox fx:id="choiceCompression" GridPane.hgrow="always" maxWidth="Infinity" GridPane.columnIndex="1"
                   GridPane.rowIndex="1">
            <tooltip>
                <Tooltip text="Sets the output compression type."/>
            </tooltip>
        </ChoiceBox>

        <Label maxWidth="Infinity" styleClass="label" alignment="CENTER_RIGHT" text="JPG Quality"
               GridPane.columnIndex="2"
               GridPane.rowIndex="1"/>
        <ChoiceBox fx:id="choiceCompressionQuality" maxWidth="Infinity" GridPane.columnIndex="3"
                   GridPane.rowIndex="1">
            <tooltip>
                <Tooltip
                        text="JPEG compression quality. 1.0 is best but biggest file size. Will be ignored for png and gif."/>
            </tooltip>
        </ChoiceBox>

        <Label maxWidth="Infinity" styleClass="label" alignment="CENTER_RIGHT" text="Rounding" GridPane.columnIndex="0"
               GridPane.rowIndex="2" GridPane.hgrow="always"/>
        <ChoiceBox fx:id="choiceRounding" maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="2"
                   GridPane.hgrow="always">
            <tooltip>
                <Tooltip text="The used rounding mode for calculating the dimensions for the different scale factors"/>
            </tooltip>
        </ChoiceBox>

        <Label maxWidth="Infinity" styleClass="label" alignment="CENTER_RIGHT" text="Threads" GridPane.columnIndex="2"
               GridPane.rowIndex="2" GridPane.hgrow="always"/>
        <ChoiceBox fx:id="choiceThreads" maxWidth="Infinity" GridPane.columnIndex="3" GridPane.rowIndex="2"
                   GridPane.hgrow="always">
            <tooltip>
                <Tooltip text="Max parallel worker threads. More is faster but requires more memory."/>
            </tooltip>
        </ChoiceBox>
    </GridPane>

    <VBox minHeight="5" GridPane.columnIndex="0" GridPane.rowIndex="6" GridPane.columnSpan="4"/>

    <Label text="Options" styleClass="label,label_main" maxWidth="Infinity" GridPane.columnIndex="0"
           GridPane.rowIndex="7"
           GridPane.columnSpan="3"/>
    <Button fx:id="btnReset" text="Reset" styleClass="button, button-sec" GridPane.columnIndex="3"
            GridPane.rowIndex="7" alignment="CENTER_RIGHT"
            GridPane.columnSpan="1" maxWidth="Infinity"/>
    <GridPane fx:id="gridPaneOptionsCheckboxes" alignment="center" hgap="5" vgap="5" GridPane.columnIndex="0"
              GridPane.rowIndex="8"
              GridPane.columnSpan="4" maxHeight="Infinity" maxWidth="Infinity" GridPane.hgrow="always">
        <CheckBox fx:id="cbSkipExisting" styleClass="check-box" alignment="CENTER_LEFT" maxWidth="Infinity"
                  text="skip existing"
                  GridPane.columnIndex="0" GridPane.rowIndex="0" GridPane.hgrow="always">
            <tooltip>
                <Tooltip text="Does not overwrite existing files"/>
            </tooltip>
        </CheckBox>
        <CheckBox fx:id="cbSkipUpscaling" styleClass="check-box" maxWidth="Infinity" text="skip upscaling"
                  GridPane.columnIndex="1" alignment="CENTER_LEFT"
                  GridPane.rowIndex="0" GridPane.hgrow="always">
            <tooltip>
                <Tooltip text="Skips all formats that need upscaling to prevent quality loss"/>
            </tooltip>
        </CheckBox>

        <CheckBox fx:id="cbVerboseLog" styleClass="check-box" selected="true"
                  maxWidth="Infinity" alignment="CENTER_LEFT"
                  text="verbose"
                  GridPane.columnIndex="0" GridPane.rowIndex="1" GridPane.hgrow="always">
            <tooltip>
                <Tooltip text="Shows verbose log"/>
            </tooltip>
        </CheckBox>
        <CheckBox fx:id="cbAndroidIncludeLdpiTvdpi" styleClass="check-box" maxWidth="Infinity"
                  text="android: include ldpi + tvdpi"
                  GridPane.columnIndex="1" alignment="CENTER_LEFT"
                  GridPane.rowIndex="1" GridPane.hgrow="always">
            <tooltip>
                <Tooltip text="Android only: If set will include additional densities (ldpi and tvdpi)"/>
            </tooltip>
        </CheckBox>

        <CheckBox fx:id="cbHaltOnError" styleClass="check-box" maxWidth="Infinity" text="halt on error"
                  GridPane.columnIndex="0" alignment="CENTER_LEFT"
                  GridPane.rowIndex="2" GridPane.hgrow="always"
                  GridPane.vgrow="always">
            <tooltip>
                <Tooltip text="Halts process on first error"/>
            </tooltip>
        </CheckBox>

        <CheckBox fx:id="cbMipmapInsteadDrawable" styleClass="check-box" maxWidth="Infinity"
                  text="android: mipmap instead drawable"
                  GridPane.columnIndex="1" alignment="CENTER_LEFT"
                  GridPane.rowIndex="2" GridPane.hgrow="always"
                  GridPane.vgrow="always">
            <tooltip>
                <Tooltip text="For Android only: creates mipmap sub-folders instead of drawable."/>
            </tooltip>
        </CheckBox>

        <CheckBox fx:id="cbAntiAliasing" styleClass="check-box" maxWidth="Infinity"
                  text="anti aliasing"
                  GridPane.columnIndex="0" alignment="CENTER_LEFT"
                  GridPane.rowIndex="3" GridPane.hgrow="always"
                  GridPane.vgrow="always">
            <tooltip>
                <Tooltip
                        text="Anti-aliases images creating a little more blurred result; useful for very small images"/>
            </tooltip>
        </CheckBox>
    </GridPane>

    <VBox minHeight="5" GridPane.columnIndex="0" GridPane.rowIndex="9" GridPane.columnSpan="4"/>

    <Label text="Post Processors" styleClass="label,label_main" maxWidth="Infinity" GridPane.columnIndex="0"
           GridPane.rowIndex="10"
           GridPane.columnSpan="4"/>

    <GridPane fx:id="gridPanePostProcessors" alignment="center" hgap="5" vgap="5" GridPane.columnIndex="0"
              GridPane.rowIndex="11"
              GridPane.columnSpan="4" maxHeight="Infinity" maxWidth="Infinity" GridPane.hgrow="always">
        <CheckBox fx:id="chEnablePngCrush" styleClass="check-box" maxWidth="Infinity" text="pngcrush (slow)"
                  GridPane.columnIndex="0" alignment="CENTER_LEFT"
                  GridPane.rowIndex="0" GridPane.hgrow="always"
                  GridPane.vgrow="always">
            <tooltip>
                <Tooltip
                        text="Will post-process all pngs with pngcrush. The executable must be set in the system environment as 'pngcrush' i.e executable from every path. Pngcrush is a tool to compress pngs. Requires v1.7.22+"/>
            </tooltip>
        </CheckBox>

        <CheckBox fx:id="cbPostConvertWebp" styleClass="check-box" maxWidth="Infinity" text="convert webp"
                  GridPane.columnIndex="1" alignment="CENTER_LEFT"
                  GridPane.rowIndex="0" GridPane.hgrow="always"
                  GridPane.vgrow="always">
            <tooltip>
                <Tooltip
                        text="Will additionally convert all png/gif to lossless wepb and all jpg to lossy webp with cwebp. Does not delete source files. The executable must be set in the system path as 'cwebp' i.e executable from every path. cwebp is the official converter from Google."/>
            </tooltip>
        </CheckBox>
    </GridPane>

    <VBox minHeight="10" GridPane.columnIndex="0" GridPane.rowIndex="12" GridPane.columnSpan="4"/>

    <ProgressBar fx:id="progressBar" maxWidth="Infinity" disable="true" GridPane.columnIndex="0"
                 GridPane.columnSpan="4" styleClass="progress-bar"
                 GridPane.rowIndex="13" progress="0"/>

    <TextArea fx:id="textFieldConsole" styleClass="text-area, console" maxWidth="Infinity" GridPane.columnIndex="0"
              GridPane.columnSpan="4"
              GridPane.rowIndex="14" visible="true" prefRowCount="250" prefColumnCount="80"/>

    <Button fx:id="btnConvert" styleClass="button, button-convert"
            maxWidth="Infinity" text="Convert" GridPane.columnIndex="0"
            GridPane.rowIndex="15"
            GridPane.columnSpan="4"
    />

    <Label fx:id="labelVersion" alignment="CENTER_LEFT" GridPane.columnIndex="0"
           GridPane.rowIndex="16"
           GridPane.columnSpan="1" styleClass="footnote"/>

    <Label fx:id="labelResult" alignment="CENTER_RIGHT" maxWidth="Infinity" GridPane.columnIndex="1"
           GridPane.rowIndex="16"
           GridPane.columnSpan="3" styleClass="footnote"/>
</GridPane>
